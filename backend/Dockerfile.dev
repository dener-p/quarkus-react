FROM maven:3.9.12-eclipse-temurin-25-alpine

WORKDIR /code

# Copy the dependency files first to leverage Docker cache
COPY pom.xml .
RUN mvn dependency:go-offline

# Copy the rest of the source
COPY src ./src

# Expose the app port and the debug port
EXPOSE 8080 5005

# Run Quarkus in dev mode, allowing remote connections
CMD ["mvn", "quarkus:dev", "-Dquarkus.http.host=0.0.0.0", "-Ddebug=5005"]
